<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<link rel="search" type="application/opensearchdescription+xml" title="SAP Cloud SDK" href="/cloud-sdk/opensearch.xml">
<script src="https://sap.github.io/cloud-sdk/js/swa.js"></script><title data-react-helmet="true">Resilience Capabilities of the SAP Cloud SDK for Java | SAP Cloud SDK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Resilience Capabilities of the SAP Cloud SDK for Java | SAP Cloud SDK"><meta data-react-helmet="true" name="description" content="How to use SAP Cloud SDK for Java to introduce resilience patterns into your application."><meta data-react-helmet="true" property="og:description" content="How to use SAP Cloud SDK for Java to introduce resilience patterns into your application."><meta data-react-helmet="true" name="keywords" content="sap,cloud,sdk,resilience,multi tenancy,cloud native,timeout"><meta data-react-helmet="true" property="og:url" content="https://github.com/SAP/cloud-sdk/cloud-sdk/docs/java/features/resilience/resilience"><link data-react-helmet="true" rel="shortcut icon" href="/cloud-sdk/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/SAP/cloud-sdk/cloud-sdk/docs/java/features/resilience/resilience"><link rel="stylesheet" href="/cloud-sdk/styles.d2516806.css">
<link rel="preload" href="/cloud-sdk/styles.cf4893ac.js" as="script">
<link rel="preload" href="/cloud-sdk/runtime~main.86c3a830.js" as="script">
<link rel="preload" href="/cloud-sdk/main.038e039b.js" as="script">
<link rel="preload" href="/cloud-sdk/1.279d08ea.js" as="script">
<link rel="preload" href="/cloud-sdk/2.0d45e310.js" as="script">
<link rel="preload" href="/cloud-sdk/75.ec38af17.js" as="script">
<link rel="preload" href="/cloud-sdk/76.6e477609.js" as="script">
<link rel="preload" href="/cloud-sdk/06bd7c86.43978908.js" as="script">
<link rel="preload" href="/cloud-sdk/da956051.c6a57678.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/cloud-sdk/"><img class="navbar__logo" src="/cloud-sdk/img/logo.svg" alt="SAP Cloud SDK"><strong class="navbar__title">SAP Cloud SDK</strong></a><a class="navbar__item navbar__link" href="/cloud-sdk/docs/overview/about">Docs</a><a href="https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a activeclassname="navbar__link--active" class="navbar__item navbar__link">Support</a><ul class="dropdown__menu"><li><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow</a></li><li><a href="https://github.com/SAP/cloud-sdk/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub JS/TS</a></li><li><a href="https://github.wdf.sap.corp/MA/sdk" target="_blank" rel="noopener noreferrer" class="dropdown__link"> GitHub Java</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a activeclassname="navbar__link--active" class="navbar__item navbar__link">Release notes</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cloud-sdk/docs/java/release-notes-sap-cloud-sdk-for-java">Java SDK</a></li><li><a href="https://help.sap.com/doc/2324e9c3b28748a4ae2ad08166d77675/1.0/en-US/js-index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">JS SDK</a></li><li><a href="https://github.com/SAP/cloud-s4-sdk-pipeline/releases" target="_blank" rel="noopener noreferrer" class="dropdown__link">CI/CD Toolkit</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://api.sap.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">SAP API Hub</a><a href="https://github.com/SAP/cloud-sdk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/cloud-sdk/"><img class="navbar__logo" src="/cloud-sdk/img/logo.svg" alt="SAP Cloud SDK"><strong class="navbar__title">SAP Cloud SDK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/overview/about">Docs</a></li><li class="menu__list-item"><a href="https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a activeclassname="navbar__link--active" class="menu__link menu__link--sublist">Support</a><ul class="menu__list"><li class="menu__list-item"><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="menu__link">Stack Overflow</a></li><li class="menu__list-item"><a href="https://github.com/SAP/cloud-sdk/issues" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub JS/TS</a></li><li class="menu__list-item"><a href="https://github.wdf.sap.corp/MA/sdk" target="_blank" rel="noopener noreferrer" class="menu__link"> GitHub Java</a></li></ul></li><li class="menu__list-item"><a activeclassname="navbar__link--active" class="menu__link menu__link--sublist">Release notes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/release-notes-sap-cloud-sdk-for-java">Java SDK</a></li><li class="menu__list-item"><a href="https://help.sap.com/doc/2324e9c3b28748a4ae2ad08166d77675/1.0/en-US/js-index.html" target="_blank" rel="noopener noreferrer" class="menu__link">JS SDK</a></li><li class="menu__list-item"><a href="https://github.com/SAP/cloud-s4-sdk-pipeline/releases" target="_blank" rel="noopener noreferrer" class="menu__link">CI/CD Toolkit</a></li></ul></li><li class="menu__list-item"><a href="https://api.sap.com/" target="_blank" rel="noopener noreferrer" class="menu__link">SAP API Hub</a></li><li class="menu__list-item"><a href="https://github.com/SAP/cloud-sdk" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/overview/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/overview/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/overview/benefits">Benefits</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Java</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Features</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">OData</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/odata/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/odata/generate-typed-odata-v2-and-v4-client-for-java">Generate a typed OData client for Java</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/odata/use-typed-odata-v2-and-v4-client-for-java">Type-safe consumption of OData services</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Connectivity</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-destination-service">Destinations</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/bapi-and-rfc/bapi-and-rfc-overview">BAPI/RFC</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Multitenancy</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/multi-tenancy/multi-tenancy-thread-context">Thread Context</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Resilience &amp; Caching</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/cloud-sdk/docs/java/features/resilience/resilience">Resilience</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">REST</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/rest/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Released clients</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/rest/clients/scp-workflow-rest-api">SCP Workflow API</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/logging-overview">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/manage-dependencies">Dependency Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/cf-deploy">Deploy to Cloud Foundry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/cf-cli">Cloud Foundry CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/tutorial-overview-sdk-java">Tutorials Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/sap-cloud-sdk-linux-how-to">SAP Cloud SDK on Linux</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Video tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/video/video-tutorial-about-getting-started-with-sap-cloudsdk-for-java">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/video/video-tutorial-about-type-safe-client-generator-for-odata-with-sap-cloudsdk-for-java">Generate OData client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/video/video-tutorial-about-connectivity--for-odata-with-sap-cloudsdk-for-java">Destinations and Cloud Connector</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/sdk-java-troubleshooting-frequent-problems">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/release-notes-sap-cloud-sdk-for-java">Release notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/frequently-asked-questions">FAQ</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">JavaScript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/getting-started">Getting started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Features</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">OData</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/features/odata/generate-typed-odata-v2-and-v4-client-for-javascript-and-typescript">Generate an OData client for JavaScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/features/odata/use-typed-odata-client-for-javascript-and-typescript">Consume OData clients for JS / TS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Connectivity</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/features/connectivity/destination-js-sdk">Destinations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/features/connectivity/proxy-js-sdk">Proxies</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/guides/migrate-to-open-source-version-of-cloud-sdk-for-javascript-typescript">Migrate to Open Source</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/api-reference-js-ts">JSDoc API reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Continuous Delivery</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/devops/getting-started">Getting started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/community/community-call">Community Call</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Related projects</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/related-projects/cloud-application-model">CAP (Cloud Application Model)</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Resilience Capabilities of the SAP Cloud SDK for Java</h1></header><div class="markdown"><p>The SAP Cloud SDK for Java provides abstractions for some frequently used resilience patterns like timeout, retry or circuit breaker.
Applying such patterns helps making an application more resilient against failures it might encounter.</p><p>The following article describes which resilience features the SDK offers and how to apply them.
If you are looking for a quick start with resilience also check out our <a href="https://developers.sap.com/tutorials/s4sdk-resilience.html">dedicated tutorial</a> on the topic!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="using-the-resilience-api"></a>Using the Resilience API<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-the-resilience-api" title="Direct link to heading">#</a></h2><p>The SDK allows to run any code in the context of one or more resilience patterns.
There are two essential building blocks for achieving this:</p><ol><li>The <code>ResilienceConfiguration</code> that determines which patterns should be applied.</li><li>The <code>ResilienceDecorator</code> which is capable of applying the configuration to an operation.</li></ol><p>The fluent <a href="https://help.sap.com/http.svc/rc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/cloudplatform/resilience/ResilienceConfiguration.html">Resilience Configuration API</a> provides builders that help with assembling different resilience patterns and their associated parameters.
Which patterns are available and how to use them is explained in the <a href="#building-a-resilience-configuration">dedicated section below</a>.</p><p>The <a href="https://help.sap.com/http.svc/rc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/cloudplatform/resilience/ResilienceDecorator.html">Resilience Decorator</a> is capable of applying such a configuration to a given <code>Callable</code> or <code>Supplier</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="executing-operations"></a>Executing Operations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#executing-operations" title="Direct link to heading">#</a></h3><p>Consider the following code:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ResilienceDecorator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeSupplier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>This code executes <code>operation()</code> in a resilient manner according to a <code>ResilienceConfiguration</code>.
The decorator will apply all in <code>configuration</code> configured patterns and all logic that is needed to combine these patterns.</p><p>Some resilience patterns are applied over multiple executions of the same operation.
For example the circuit breaker will prevent further executions, if a significant portion of previous attempts failed.</p><p>To understand how the SDK applies this concept consider the following snippet:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">configuration1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ResilienceConfiguration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;config-id-1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">configuration2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ResilienceConfiguration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;config-id-1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">configuration3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ResilienceConfiguration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;config-id-2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ResilienceDecorator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeSupplier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> configuration1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ResilienceDecorator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeSupplier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> configuration1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ResilienceDecorator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeSupplier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> configuration2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ResilienceDecorator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeSupplier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> configuration3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>Here executions one, two and three will all share the same &quot;resilience state&quot;.
This means that they will share the same instance of a circuit breaker or bulkhead.
So the state is shared via <a href="#building-a-resilience-configuration">the identifier</a> of the associated configuration.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="operation-types"></a>Operation Types<a aria-hidden="true" tabindex="-1" class="hash-link" href="#operation-types" title="Direct link to heading">#</a></h4><p>The decorator operates with two kinds of operations:</p><table><tbody><tr><td><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html">Callable</a></td><td>May throw checked or unchecked Exceptions</td></tr><tr><td><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html">Supplier</a></td><td>May only throw unchecked Exceptions</td></tr></tbody></table><p>Noticeable is the difference in signatures: <em>Callable</em> throws a <em>checked exception</em> while <em>Supplier</em> does not.
So you can choose whatever fits your use case best.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="execution-variants"></a>Execution Variants<a aria-hidden="true" tabindex="-1" class="hash-link" href="#execution-variants" title="Direct link to heading">#</a></h4><p>The decorator allows for three different ways of applying a configuration: </p><table><tbody><tr><td><em>Execute</em></td><td>Immediately runs the operation</td></tr><tr><td><em>Decorate</em></td><td>Returns a new operation to be run later</td></tr><tr><td><em>Queue</em></td><td>Immediately runs the operation asynchronously</td></tr></tbody></table><p>In case your operation should run asynchronously we highly recommend you leverage the <code>queue</code> functionality. The decorator will ensure the <a href="/cloud-sdk/docs/java/features/multi-tenancy/multi-tenancy-thread-context">Thread Context</a> with Tenant and Principal information is propagated correctly to new Threads.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Note that the Resilience Decorator will try to propagate the current <a href="/cloud-sdk/docs/java/features/multi-tenancy/multi-tenancy-thread-context">Thread Context</a> at the <em>time the decorator is invoked</em>. This is important when you are decorating a Callable or Supplier and running it later. The Thread Context must be available whenever <code>decorateCallable</code> or <code>decorateSupplier</code> is evaluated. So if the call to <code>ResilienceDecorator</code> should take place asynchronously you should <a href="/cloud-sdk/docs/java/features/multi-tenancy/multi-tenancy-thread-context#running-asynchronous-operations">follow these steps</a> to ensure the Thread Context is available.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="failures-and-fallbacks"></a>Failures and Fallbacks<a aria-hidden="true" tabindex="-1" class="hash-link" href="#failures-and-fallbacks" title="Direct link to heading">#</a></h4><p>An operation might fail for two reasons:</p><ol><li>The operation itself encounters a failure and throws an error or exception</li><li>A resilience pattern causes the operation to fail (e.g. the circuit breaker prevents further invocations)</li></ol><p>The SDK wraps all kind of checked and unchecked exceptions into a <code>ResilienceRuntimeException</code> and throws them.</p><p>To deal with failures one can either catch the <code>ResilienceRuntimeException</code> or provide a fallback function:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">executeCallable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">throwable</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">debug</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Encountered a failure in operation: &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> throwable</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">debug</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Proceeding with fallback value: {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fallback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> fallback</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>In the case of Callable this relieves you of the need to catch the exception at the outer level.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="building-a-resilience-configuration"></a>Building a Resilience Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#building-a-resilience-configuration" title="Direct link to heading">#</a></h3><p>A new <code>ResilienceConfiguration</code> <em>with default values</em> is created by providing an identifier for it:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">configuration </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ResilienceConfiguration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;identifier&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>The identifier can be either a string or a class.
In case of the latter the (full) classname will be used as identifier.
The identifier will be used to apply resilience patterns across <a href="#executing-operations">multiple invocations to operations</a>.</p><p>Check <a href="https://help.sap.com/http.svc/rc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/cloudplatform/resilience/ResilienceConfiguration.html#of-java.lang.String-">the JavaDoc</a> for which patterns and parameters will be applied by default.
You can also create a configuration with all patterns disabled:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">configuration </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ResilienceConfiguration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">empty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;identifier&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>Individual resilience patterns are configured via dedicated builder classes like <code>TimeLimiterConfiguration</code> and are added to the configuration via dedicated setters, e.g. <code>timeLimiterConfiguration()</code>.
For details see the list of <a href="#resilience-capabilities">Resilience Capabilities</a> below.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="multi-tenancy"></a>Multi Tenancy<a aria-hidden="true" tabindex="-1" class="hash-link" href="#multi-tenancy" title="Direct link to heading">#</a></h4><p>The SDK is capable of applying the different resilience patterns in a tenant and principal aware manner.
Consider for example the Bulkhead pattern which limits the amount of parallel executions.
If the operation is tenant specific then you would probably want to avoid one tenant blocking all others.</p><p>For this reason the SDK <em>by default</em> isolates resilience patterns based on tenant and principal, if they are available.
This strategy can be configured, e.g. for running <em>without any isolation</em> use:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">configuration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isolationMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ResilienceIsolationMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">NO_ISOLATION</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>Other than no isolation there are essentially two modes for tenant and/or principal isolation:</p><table><tbody><tr><td>Required</td><td>Always isolates on tenant and/or principal level, will throw an exception if no tenant/principal is available</td></tr><tr><td>Optional</td><td>Only isolates if tenant and/or principal information is available</td></tr></tbody></table><p>Details can be found on the API reference of <a href="https://help.sap.com/http.svc/rc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/cloudplatform/resilience/ResilienceIsolationMode.html">ResilienceIsolationMode</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="resilience-capabilities"></a>Resilience Capabilities<a aria-hidden="true" tabindex="-1" class="hash-link" href="#resilience-capabilities" title="Direct link to heading">#</a></h2><p>The following resilience patterns are available and can be configured in a Resilience Configuration:</p><table><tbody><tr><td>Timeout</td><td><em><a href="https://help.sap.com/http.svc/rc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/cloudplatform/resilience/ResilienceConfiguration.TimeLimiterConfiguration.html">TimeLimiterConfiguration</a></em></td><td>Limit how long an operation may run before it should be interrupted</td></tr><tr><td>Retry</td><td><em><a href="https://help.sap.com/http.svc/rc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/cloudplatform/resilience/ResilienceConfiguration.RetryConfiguration.html">RetryConfiguration</a></em></td><td>Retry a failed operation a limited amount of times before failing</td></tr><tr><td>Circuit Breaker</td><td><em><a href="https://help.sap.com/http.svc/rc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/cloudplatform/resilience/ResilienceConfiguration.CircuitBreakerConfiguration.html">CircuitBreakerConfiguration</a></em></td><td>Reject attempts if too many failures occurred in the past</td></tr><tr><td>Bulkhead</td><td><em><a href="https://help.sap.com/http.svc/rc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/cloudplatform/resilience/ResilienceConfiguration.BulkheadConfiguration.html">BulkheadConfiguration</a></em></td><td>Limit how many instances of this operation may run in parallel</td></tr></tbody></table><p>You can find good explanations on how the individual patterns behave on the <a href="https://resilience4j.readme.io/docs/" target="_blank" rel="noopener noreferrer">documentation of resilience4j</a> which the SDK uses under the hood to perform resilient operations.</p><p>Be aware that the patterns interact with each other. They are applied in the following order:</p><ol><li>Timeouts</li><li>Bulkhead</li><li>Circuit Breaker</li><li>Retries</li><li>Fallbacks</li></ol><p>This means that every individual attempt triggered by retries will be limited by the timeout.
Every failed retry will be accounted for in the circuit breaker.
Only if all retries failed the fallback function will be considered.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/SAP/cloud-sdk/edit/documentation/docs/java/features/resilience/resilience.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-07-02T08:44:00.000Z" class="docLastUpdatedAt_1sqk">7/2/2020</time> by <strong>Matthias Kuhr</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cloud-sdk/docs/java/features/multi-tenancy/multi-tenancy-thread-context"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Multi Tenancy with the Thread Context</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cloud-sdk/docs/java/features/rest/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-the-resilience-api" class="table-of-contents__link">Using the Resilience API</a><ul><li><a href="#executing-operations" class="table-of-contents__link">Executing Operations</a></li><li><a href="#building-a-resilience-configuration" class="table-of-contents__link">Building a Resilience Configuration</a></li></ul></li><li><a href="#resilience-capabilities" class="table-of-contents__link">Resilience Capabilities</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/overview/about">SAP Cloud SDK overview</a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/java/getting-started">Cloud SDK for Java</a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/js/getting-started">Cloud SDK for JS</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/cloud-sdk/docs/java/features/resilience/docs/devops/getting-started">Cloud SDK for CI/CD</a></li><li class="footer__item"><a href="https://developers.sap.com/tutorial-navigator.html?tag=products:technology-platform/sap-cloud-sdk/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud SDK Tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://developers.sap.com/topics/cloud-sdk.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAP Developers Portal</a></li><li class="footer__item"><a href="https://community.sap.com/topics/cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud SDK Community Page</a></li><li class="footer__item"><a href="https://help.sap.com/viewer/product/SAP_CLOUD_SDK/1.0/en-US?task=discover_task" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud SDK on SAP Help</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/SAP/cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 SAP SE or an SAP affiliate company. All rights reserved.</div></div></div></footer></div>
<script src="/cloud-sdk/styles.cf4893ac.js"></script>
<script src="/cloud-sdk/runtime~main.86c3a830.js"></script>
<script src="/cloud-sdk/main.038e039b.js"></script>
<script src="/cloud-sdk/1.279d08ea.js"></script>
<script src="/cloud-sdk/2.0d45e310.js"></script>
<script src="/cloud-sdk/75.ec38af17.js"></script>
<script src="/cloud-sdk/76.6e477609.js"></script>
<script src="/cloud-sdk/06bd7c86.43978908.js"></script>
<script src="/cloud-sdk/da956051.c6a57678.js"></script>
</body>
</html>